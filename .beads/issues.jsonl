{"id":"bd-110","title":"Review eval: validate multi-agent code review lifecycle","description":"Epic tracking the review eval levels (R1-R4). Validates that agents can request reviews, reviewers can find bugs and vote, authors can respond to feedback, and the full review loop works end-to-end. See eval-review.md for the full plan.","status":"open","priority":1,"issue_type":"feature","created_at":"2026-01-31T13:46:37.318264481Z","created_by":"bob","updated_at":"2026-01-31T13:46:37.318264481Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["epic","eval","review"]}
{"id":"bd-110.1","title":"R1: Reviewer agent eval — find bugs, comment, vote","description":"Standalone reviewer eval. Seed code with intentional issues (bug, quality issue, clean code). Create crit review, run reviewer agent, score on 65-point rubric. COMPLETE: Run 1 (v1 prompt) 51/65 (78%), Run 2 (v2 prompt) 61/65 (94%), Run 3 (v2 + fixed fixture) 65/65 (100%). v2 prompt (clippy, web search, severity levels) is the baseline. Fixture A v2 (OnceLock + role-based match) is the canonical fixture.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T13:46:44.595419858Z","created_by":"bob","updated_at":"2026-01-31T14:40:22.397089925Z","closed_at":"2026-01-31T13:46:44.595419858Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["eval","review"],"dependencies":[{"issue_id":"bd-110.1","depends_on_id":"bd-110","type":"parent-child","created_at":"2026-01-31T13:46:44.595419858Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-110.2","title":"R2: Author response eval — handle reviewer comments","description":"Seed a crit review with pre-written reviewer comments (from an R1 run or manually authored). Run the dev agent loop. Score whether it correctly categorizes each comment and takes the right action: fix (make code change, reply 'Fixed in <change>'), address (explain why current approach is correct), or defer (create bead, reply 'Filed <bead-id>'). Key question: can the agent distinguish 'must fix' from 'won't fix' from 'good idea, later'?","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T13:46:51.158777197Z","created_by":"bob","updated_at":"2026-01-31T16:06:20.074517072Z","closed_at":"2026-01-31T16:06:20.074493067Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"labels":["eval","review"],"dependencies":[{"issue_id":"bd-110.2","depends_on_id":"bd-110","type":"parent-child","created_at":"2026-01-31T13:46:51.158777197Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-110.2","depends_on_id":"bd-110.1","type":"blocks","created_at":"2026-01-31T13:47:10.534432846Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-110.3","title":"R3: Full review loop — author + reviewer coordination","description":"Two agents coordinating across iterations: (1) dev agent finishes work, creates crit review, announces on botbus, (2) reviewer picks up review, comments, blocks, (3) dev agent sees block, fixes issue, re-requests review, (4) reviewer verifies fix, LGTMs, (5) dev agent merges. Tests the full back-and-forth. Scoring combines R1 (reviewer quality) and R2 (author response) plus coordination mechanics.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T13:46:57.137852523Z","created_by":"bob","updated_at":"2026-01-31T16:06:23.033708601Z","closed_at":"2026-01-31T16:06:23.033683985Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"labels":["eval","review"],"dependencies":[{"issue_id":"bd-110.3","depends_on_id":"bd-110","type":"parent-child","created_at":"2026-01-31T13:46:57.137852523Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-110.3","depends_on_id":"bd-110.2","type":"blocks","created_at":"2026-01-31T13:47:10.576085120Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-110.4","title":"R4: Integration — worker loop + review + merge end-to-end","description":"Full dev-agent architecture running end-to-end: dev agent triages inbox/beads, dispatches work (sequential or parallel), workers complete tasks, dev agent creates crit reviews, reviewer reviews, dev agent handles feedback, dev agent merges approved work. Scoring combines worker loop (248 pts), review (65 pts), and coordination mechanics.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T13:47:02.404871947Z","created_by":"bob","updated_at":"2026-01-31T17:33:51.952337557Z","closed_at":"2026-01-31T17:33:51.952289177Z","close_reason":"R4-1 complete: 89/95 (94%) EXCELLENT — full lifecycle validated","source_repo":".","compaction_level":0,"original_size":0,"labels":["eval","review"],"dependencies":[{"issue_id":"bd-110.4","depends_on_id":"bd-110","type":"parent-child","created_at":"2026-01-31T13:47:02.404871947Z","created_by":"bob","metadata":"{}","thread_id":""},{"issue_id":"bd-110.4","depends_on_id":"bd-110.3","type":"blocks","created_at":"2026-01-31T13:47:10.608880939Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-122","title":"E2E: sync lifecycle","description":"Tests 4+5 from testing.md — tamper version marker, verify stale detection, sync, verify content preservation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-29T18:39:18.861195063Z","created_by":"bob","updated_at":"2026-01-29T18:42:48.498617447Z","closed_at":"2026-01-29T18:42:48.498603861Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-123","title":"Write agent-loop.sh end-to-end test","description":"The agent-loop.sh script in scripts/ needs manual or integration testing. Verify: agent lease claim/release, has_work() function, clean exit on no work, cleanup trap. May need mock botbus/br for CI.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-29T17:22:47.055798611Z","created_by":"bob","updated_at":"2026-01-29T19:37:03.486915923Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-13m","title":"Run Level 2 eval: agent task execution with protocol compliance scoring","description":"Execute first Level 2 behavioral evaluation.\n\nSteps:\n1. Create eval environment in /tmp with botbox init\n2. Seed with simple task (hello world endpoint)\n3. Spawn agent with minimal prompt\n4. Observe behavior, collect tool outputs\n5. Score using rubric (critical steps: claim/start/finish/release/sync)\n6. Document findings: protocol compliance, work quality, gaps\n7. Update eval-proposal.md or create eval-results/ with findings\n\nGoal: Validate that AGENTS.md enables protocol-compliant behavior in practice.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-29T20:33:05.730919055Z","created_by":"bob","updated_at":"2026-01-29T20:38:45.129884958Z","closed_at":"2026-01-29T20:38:45.129861214Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-14y","title":"add cli, tui to type of project selection in botbox cli","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-31T21:06:34.989501637Z","created_by":"bob","updated_at":"2026-01-31T21:09:06.517491130Z","closed_at":"2026-01-31T21:09:06.517456154Z","close_reason":"Added 'cli' and 'tui' to PROJECT_TYPES in init.mjs. Now supports all 6 types: api, cli, frontend, library, monorepo, tui.","source_repo":".","compaction_level":0,"original_size":0,"labels":["cli"]}
{"id":"bd-1jp","title":"E2E: existing repo clone and init","description":"Test 3 from testing.md — clone botcrit into /tmp, run botbox init, verify no clobbering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T18:39:18.848612765Z","created_by":"bob","updated_at":"2026-01-29T18:42:48.498968565Z","closed_at":"2026-01-29T18:42:48.498955330Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1pe","title":"botbox sync should update managed section even when docs are unchanged","description":"sync checks doc content hashes and exits early with 'Already up to date' when docs haven't changed. But the managed section is rendered from templates.mjs, which can change independently. Template changes (e.g., identity section, workspace claim URI) don't trigger a managed section update. Fix: either include templates.mjs in the version hash, or always regenerate the managed section and compare.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-01-30T16:57:27.959057530Z","created_by":"bob","updated_at":"2026-01-30T16:57:27.959057530Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1pp","title":"UX test: subagent reads AGENTS.md and answers workflow questions","description":"Spawn a subagent in a fresh botbox-initialized repo. Have them read AGENTS.md and answer questions about the workflow to validate doc clarity and completeness.\n\nSteps:\n1. Create fresh test repo with botbox init\n2. Spawn subagent in that directory\n3. Ask them to read AGENTS.md\n4. Ask non-leading questions about: identity, triage, starting work, cross-project feedback, reviews, tools\n5. Evaluate their understanding\n6. Write report of findings\n7. Create ux-test.md documenting this testing methodology","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T19:47:54.813706644Z","created_by":"bob","updated_at":"2026-01-29T19:50:25.957862776Z","closed_at":"2026-01-29T19:50:25.957834984Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1vm","title":"Add --seed-work flag to botbox init for initial bead creation","description":"Add a flag/option to botbox init that seeds initial beads by: (1) registering the project on botbus (botbus send projects ... following the convention of existing project registrations), (2) scouting the repo for spec files, README, source structure, and (3) creating beads for initial work items found. Reference: terseid project has bd-3am (review spec.md and create beads) and bd-6z5 (register project on botbus) as examples of what this should automate.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T17:03:00.203110324Z","created_by":"bob","updated_at":"2026-01-30T17:03:00.203110324Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1ws","title":"E2E: fresh repo non-interactive init","description":"Test 1 from testing.md — create tmp repo, run botbox init with all CLI flags, verify outputs, doctor, sync --check","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-29T18:39:18.815660619Z","created_by":"bob","updated_at":"2026-01-29T18:42:48.488116080Z","closed_at":"2026-01-29T18:42:48.488085552Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1y1","title":"Document label conventions for bead grooming","description":"Triage now includes bead grooming, which tells agents to add labels when appropriate. Need guidance on:\n\n- When to create vs reuse labels\n- Naming conventions (kebab-case? categories?)\n- Common label categories (e.g., type:bug, area:api, effort:small)\n- How to list existing labels (br label list)\n- Whether labels should be project-specific or cross-project\n\nThis was identified during eval-driven doc improvements — agents need to know what labels to use.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-29T23:04:19.555287633Z","created_by":"bob","updated_at":"2026-01-29T23:04:19.555287633Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-22i","title":"Warn when --init-beads is ignored due to tools list","description":"init --init-beads is silently skipped when beads is not in the tools list. Should warn the user: 'Skipping beads init: beads not in tools list'.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-29T17:33:15.809769092Z","created_by":"bob","updated_at":"2026-01-29T17:37:25.439001077Z","closed_at":"2026-01-29T17:37:25.438977603Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"labels":["review-finding","should-fix"]}
{"id":"bd-23n","title":"Document --dangerously-skip-permissions requirement for agent-loop.sh","description":"claude -p requires --dangerously-skip-permissions for autonomous file operations. This is currently hardcoded in agent-loop.sh but needs documentation. Add to eval-loop.md setup, AGENTS.md agent loop section, and consider making it configurable (CLAUDE_SKIP_PERMISSIONS env var).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:23:47.728594911Z","created_by":"bob","updated_at":"2026-01-30T16:25:45.904990894Z","closed_at":"2026-01-30T16:25:45.904907669Z","close_reason":"--dangerously-skip-permissions added to agent-loop.sh, documented in script","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-29c","title":"Build the real botbox CLI (init, sync, doctor)","description":"The CLI scaffold is built with commander, inquirer, bun. Commands are stubbed with real logic. Needs end-to-end validation: run botbox init in a temp project, verify files created, run botbox sync, run botbox doctor. Fix any issues found.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-29T17:22:46.699530307Z","created_by":"bob","updated_at":"2026-01-29T19:36:56.263044270Z","closed_at":"2026-01-29T19:36:56.263018902Z","close_reason":"CLI is complete. init/sync/doctor all implemented with 50 passing tests and 8 e2e tests. Dog-fooded during development.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2bv","title":"Add triage guidance for checking blocked bead status","description":"During grooming/triage, agents should check blocked beads to see if their blockers have been resolved (e.g., missing requirements were added, upstream tool fixed). If resolved, unblock and consider for work. Update triage.md and worker-loop.md with this guidance.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-30T14:23:47.315139001Z","created_by":"bob","updated_at":"2026-01-30T16:25:45.962545945Z","closed_at":"2026-01-30T16:25:45.962518293Z","close_reason":"Added blocked bead re-evaluation step to triage.md (step 4) and worker-loop.md","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2bz","title":"Add botbus whoami guidance to agent-loop.sh and worker-loop.md","description":"Agent-loop.sh should run 'botbus whoami --agent $AGENT' at start to confirm identity. botbus v0.3.7+ generates a random name if BOTBUS_AGENT isn't set. Worker-loop.md preflight section should also recommend this. Currently agents get BOTBUS_AGENT from the script but whoami confirms it and handles the fallback case.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T16:21:49.331883347Z","created_by":"bob","updated_at":"2026-01-30T16:25:45.934682903Z","closed_at":"2026-01-30T16:25:45.934645933Z","close_reason":"Added botbus whoami --agent to agent-loop.sh and preflight.md, naming convention in worker-loop.md and preflight.md","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2dt","title":"Draft mesh protocol spec","description":"Write initial mesh protocol draft with message schema, claims/leases, spawn lifecycle, and review loop.","status":"closed","priority":2,"issue_type":"docs","created_at":"2026-01-26T23:29:03.072497216Z","created_by":"bob","updated_at":"2026-01-26T23:29:52.038608285Z","closed_at":"2026-01-26T23:29:52.038538374Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2dw","title":"Fix extra blank line in AGENTS.md when no reviewers","description":"renderAgentsMd produces a double blank line before the comment when reviewers is empty, due to template string interpolation of empty reviewerSection. Normalize the whitespace.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-29T17:33:16.437183159Z","created_by":"bob","updated_at":"2026-01-29T17:37:25.449996035Z","closed_at":"2026-01-29T17:37:25.449977390Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"labels":["review-finding","should-fix"],"dependencies":[{"issue_id":"bd-2dw","depends_on_id":"bd-3fm","type":"blocks","created_at":"2026-01-29T17:33:22.857666327Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-2f9","title":"Fix has_work() wasted iteration from self-messages","description":"After agent sends 'Completed bd-xxx' on the project channel, has_work() sees unread messages and spawns a claude session that finds no work. Upstream fix requested in #botbus (self-messages shouldn't count as unread). Fallback: only check br ready in has_work(), drop inbox check. Or mark own messages as read after sending.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T14:23:47.198651008Z","created_by":"bob","updated_at":"2026-01-30T16:05:43.138958537Z","closed_at":"2026-01-30T16:05:43.138930836Z","close_reason":"Fixed upstream in botbus v0.3.8 — inbox now filters own messages","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2fo","title":"Write and run agent-loop.sh eval","description":"Create an eval doc for testing agent-loop.sh end-to-end. The eval should:\n\n1. Set up a fresh botbox project with 2-3 beads of varying quality\n2. Run agent-loop.sh (or simulate its behavior) with Sonnet\n3. Verify the shell loop works: one bead per iteration, has_work() gate, clean exit\n4. Score each iteration using the Level 2 rubric\n5. Verify shell-level concerns: cleanup trap, agent lease, shutdown message\n\nKey difference from Level 2 evals: the shell script controls iteration, not the agent.\nThe agent should complete exactly one task per invocation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T23:55:21.777899728Z","created_by":"bob","updated_at":"2026-01-30T16:21:54.451536600Z","closed_at":"2026-01-30T16:21:54.451513827Z","close_reason":"Eval written (eval-loop.md) and executed (2 runs: run 1 found has_work() bugs + sandbox issue, run 2 scored 211/218 97%)","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":2,"issue_id":"bd-2fo","author":"Bob","text":"Context for next session:\n- eval-loop.md has the full eval plan (218 pts total)\n- agent-loop.sh is updated with all eval learnings (random workspaces, grooming, exit-after-finish)\n- maw v0.8.0 fixed the merge issue (bd-l3w closed)\n- maw output now includes 'IMPORTANT: All files must be under this path'\n- Use Option B (simulate per-iteration) to avoid running the full shell script\n- Seed 2 beads: 1 well-specified, 1 poorly specified\n- Key test: does the agent complete exactly 1 bead then stop?","created_at":"2026-01-30T00:02:53Z"}]}
{"id":"bd-2fq","title":"Add review-loop.md guidance for workspace code visibility during re-review","description":"The review-loop.md doc should include explicit guidance for reviewers during re-review: read code from the workspace path, not from the project root. The project root has the pre-fix code until merge.\n\nAdd a note like:\n  IMPORTANT: During re-review, the author's fixes are in their workspace, not the main branch.\n  Check the botbus review-response message for the workspace path, or use maw ws list to find it.\n  Read source files from .workspaces/<ws-name>/ to see the current code.\n\nDiscovered in R4-1: reviewer read main branch src/main.rs (unfixed) instead of workspace copy (fixed), resulting in a false 'NOT FIXED' re-block.\n\nAcceptance criteria:\n- review-loop.md includes workspace visibility guidance for re-review step\n- Guidance is clear enough that a reviewer agent follows it without explicit prompt help\n\nTesting: bun test (doc hash changes)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T19:59:49.313763836Z","created_by":"bob","updated_at":"2026-01-31T20:14:11.607477654Z","closed_at":"2026-01-31T20:14:11.607453118Z","close_reason":"Added Re-review section to review-loop.md with workspace visibility guidance","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2g4","title":"Add language selection to botbox init with .gitignore generation","description":"Add a language/framework selection step to botbox init (e.g., rust, python, node, go). Use a CLI tool (like gitignore.io or similar) to generate an appropriate .gitignore for the selected language. Should be optional — skip if .gitignore already exists. Add --language flag for non-interactive use.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-30T16:53:44.402288614Z","created_by":"bob","updated_at":"2026-01-30T16:53:44.402288614Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2gl","title":"Replace process.exit() in commands with thrown errors","description":"Commands call process.exit() directly, which kills testability and prevents composition. Refactor: commands throw errors or return exit codes, entry point (index.mjs) catches and calls process.exit(). This also fixes doctor calling process.exit(0) on success and unblocks testing sync --check and sync with missing .agents/.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-29T17:33:14.716639412Z","created_by":"bob","updated_at":"2026-01-29T17:36:31.803459446Z","closed_at":"2026-01-29T17:36:31.803435641Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"labels":["review-finding","should-fix"]}
{"id":"bd-2n7","title":"copy beads grooming guidelines from triage.md to groom.md","description":"This is because I occasionally ask agents just to groom beads.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-31T20:56:25.781130366Z","created_by":"bob","updated_at":"2026-01-31T20:57:00.357261766Z","closed_at":"2026-01-31T20:57:00.315988068Z","close_reason":"Created groom.md with beads grooming guidelines extracted from triage.md. Includes: title/description/priority/labels/acceptance criteria/testing strategy validation. Handles bead breakdown and announces grooming completions.","source_repo":".","compaction_level":0,"original_size":0,"labels":["skill"],"comments":[{"id":4,"issue_id":"bd-2n7","author":"Bob","text":"Closed: groom.md created","created_at":"2026-01-31T20:57:00Z"}]}
{"id":"bd-2tg","title":"Draft botbox website","description":"Create a minimal brutalist botbox landing page for agents, covering tools and workflow.","status":"closed","priority":2,"issue_type":"docs","created_at":"2026-01-27T14:14:39.448840834Z","created_by":"bob","updated_at":"2026-01-27T14:15:23.058956182Z","closed_at":"2026-01-27T14:15:23.058873196Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ue","title":"Add tool-issue botbus reporting to workflow docs","description":"When agents encounter unexpected tool behavior (e.g., maw ws merge --destroy not destroying, br update failing silently), they should post a botbus message with -L tool-issue for observability. Add guidance to worker-loop.md stuck check section and finish.md. Example: botbus send --agent $AGENT $PROJECT 'Tool issue: maw ws merge --destroy did not remove workspace' -L tool-issue","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-30T14:23:47.593348743Z","created_by":"bob","updated_at":"2026-01-30T16:25:46.022592312Z","closed_at":"2026-01-30T16:25:46.022559470Z","close_reason":"Added tool-issue reporting to worker-loop.md stuck check and finish.md workspace destroy","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ya","title":"Fix sync printing null for missing version marker","description":"When .version file is missing, readVersionMarker returns null. sync.mjs prints 'Synced: null → abc123'. Should print 'Synced: (none) → abc123' or similar.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-29T17:33:15.114715661Z","created_by":"bob","updated_at":"2026-01-29T17:36:31.813981708Z","closed_at":"2026-01-29T17:36:31.813957092Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"labels":["review-finding","should-fix"],"dependencies":[{"issue_id":"bd-2ya","depends_on_id":"bd-2gl","type":"blocks","created_at":"2026-01-29T17:33:22.837507124Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-2ym","title":"Write tests for @botbox/cli","description":"Write bun test suite covering: lib/docs.mjs (listWorkflowDocs, copyWorkflowDocs, currentVersion, version markers), lib/templates.mjs (renderAgentsMd, updateManagedSection with and without existing markers), commands/init.mjs (non-interactive mode, file creation, symlink), commands/sync.mjs (up-to-date check, stale detection, update), commands/doctor.mjs (tool checks, project structure checks). Use bun:test framework with temp directories.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-29T17:22:46.527815809Z","created_by":"bob","updated_at":"2026-01-29T17:25:07.020276186Z","closed_at":"2026-01-29T17:25:07.020248515Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2zx","title":"Improve workflow docs based on eval insights","description":"Based on Level 2 eval results (Opus: 100%, Sonnet: 88%), improve workflow docs to close the 11-point gap:\n\n1. Emphasize complete workflow sequence (triage → start → update → finish)\n2. Clarify optional vs mandatory steps in docs\n3. Add explicit workspace cleanup to finish.md (merge + destroy)\n4. Clarify progress update timing in update.md (at least once during work)\n5. Reference worker-loop.md more prominently in AGENTS.md managed section\n6. Fix claim format from \"src/**\" to \"file://<project>/<file-glob>\"\n\nGap analysis:\n- No triage workflow (-2)\n- No progress update (-2)\n- Workspace not destroyed (-2)\n- Error handling gap (-5)\n\nAll gaps are documentation clarity issues, not capability issues.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T21:22:17.026061387Z","created_by":"bob","updated_at":"2026-01-29T21:23:45.635892504Z","closed_at":"2026-01-29T21:23:45.635863320Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":1,"issue_id":"bd-2zx","author":"Bob","text":"Completed workflow doc improvements:\n\n1. Fixed claim format: \"path/**\" → \"file://$BOTBOX_PROJECT/path/**\" (start.md + templates.mjs)\n2. Emphasized progress comments: \"at least one during work\" (worker-loop.md)\n3. Clarified update.md description: \"status updates\" → \"change bead status\" (templates.mjs)\n4. Emphasized workspace cleanup: made --destroy flag importance clear (finish.md)\n5. Added pointer to worker-loop.md as canonical workflow in managed section\n\nAll tests pass (50/50). Version hash: 14e15a9821fe","created_at":"2026-01-29T21:23:42Z"}]}
{"id":"bd-30v","title":"E2E: interactive edge cases via botty","description":"Test 7 from testing.md — arrow keys, deselect all, send-bytes for special keys","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-29T18:39:18.889592741Z","created_by":"bob","updated_at":"2026-01-29T18:45:49.631799510Z","closed_at":"2026-01-29T18:45:49.631780985Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-30v","depends_on_id":"bd-32v","type":"blocks","created_at":"2026-01-29T18:39:22.431763553Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-32v","title":"E2E: interactive init via botty","description":"Test 2 from testing.md — spawn botbox init inside botty, drive prompts with send/wait/snapshot","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T18:39:18.836055714Z","created_by":"bob","updated_at":"2026-01-29T18:45:49.627517082Z","closed_at":"2026-01-29T18:45:49.627489710Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-32v","depends_on_id":"bd-1ws","type":"blocks","created_at":"2026-01-29T18:39:22.411314958Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-397","title":"Add files field to package.json","description":"No files field in package.json. Add files: [src/, docs/] to ensure workflow docs ship in the npm tarball.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-29T17:33:16.239707729Z","created_by":"bob","updated_at":"2026-01-29T17:37:25.449464609Z","closed_at":"2026-01-29T17:37:25.449436336Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"labels":["review-finding","should-fix"]}
{"id":"bd-3e7","title":"Add agent naming convention to workflow docs","description":"Convention: agents should adopt <project>-dev as their name (e.g., botbox-dev, maw-dev) unless spawned by agent-loop.sh (which generates random names like storm-raven). Update worker-loop.md identity section and preflight.md. The agent-loop.sh already handles this with botbus generate-name.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T16:23:36.583541354Z","created_by":"bob","updated_at":"2026-01-30T16:25:46.079834977Z","closed_at":"2026-01-30T16:25:46.079808477Z","close_reason":"Added naming convention to worker-loop.md identity section and preflight.md step 1","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3fi","title":"Add botbox-triage skill to handle incoming work requests","description":"The triage skill (draft/triage.md) needs to handle cross-project work requests via botbus. Define the convention: how an agent in project X sends a task-request to project Y's channel, and how the triage loop picks it up and creates a bead.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-29T17:22:47.223273035Z","created_by":"bob","updated_at":"2026-01-29T19:37:00.333127272Z","closed_at":"2026-01-29T19:37:00.333099089Z","close_reason":"Obsolete. Pivoted away from skills to workflow docs. Triage is now documented in triage.md and report-issue.md handles cross-project feedback.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3fm","title":"Prevent init from silently overwriting AGENTS.md","description":"botbox init unconditionally overwrites AGENTS.md if it exists. Should detect existing file and either warn+skip or require --force flag. Same pattern as the CLAUDE.md symlink check.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-29T17:33:14.491893090Z","created_by":"bob","updated_at":"2026-01-29T17:35:09.073900602Z","closed_at":"2026-01-29T17:35:09.073876136Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"labels":["must-fix","review-finding"]}
{"id":"bd-3gl","title":"Add cross-project feedback workflow and #projects registry","description":"Enable agents to discover projects, file bugs in other repos, and notify project leads.\n\nComponents:\n1. New doc: report-issue.md (or cross-project-feedback.md)\n   - Query #projects registry to find tool owner\n   - Navigate to project repo\n   - Create beads with br create\n   - Post to project channel with -L feedback tagging @<lead-agent>\n\n2. Update triage.md\n   - Add step for handling -L feedback messages from other agents\n   - Review mentioned beads, respond on botbus\n\n3. Populate #projects registry\n   - Format: 'project:<name> repo:<path> lead:<agent> tools:<tool1>,<tool2>'\n   - Labels: -L project-registry\n   - Initial projects: botty, botbus, beads_rust, botcrit, maw, botbox\n\n4. Update AGENTS.md managed section template\n   - Mention #projects registry pattern\n   - Link to report-issue.md\n\nThis enables the full loop:\n- Agent uses tool, encounters issue\n- Agent files beads in tool's repo\n- Agent notifies tool's lead agent\n- Lead agent triages and responds","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-29T19:20:08.085772239Z","created_by":"bob","updated_at":"2026-01-29T19:22:14.970190555Z","closed_at":"2026-01-29T19:22:14.970166410Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3k9","title":"E2E: doctor healthy vs broken","description":"Test 6 from testing.md — init then break things, verify doctor catches each issue","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T18:39:18.876885248Z","created_by":"bob","updated_at":"2026-01-29T18:42:48.499296840Z","closed_at":"2026-01-29T18:42:48.499283646Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3k9","depends_on_id":"bd-1ws","type":"blocks","created_at":"2026-01-29T18:39:22.445224739Z","created_by":"bob","metadata":"{}","thread_id":""}]}
{"id":"bd-3ks","title":"Guard updateManagedSection against corrupt markers","description":"updateManagedSection in templates.mjs can corrupt files when markers are out of order (endIdx < startIdx) or only one marker exists. Add guards: if endIdx < startIdx, treat as missing. If only one marker present, treat as missing. Add tests for these edge cases.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-29T17:33:13.837922358Z","created_by":"bob","updated_at":"2026-01-29T17:34:08.864216426Z","closed_at":"2026-01-29T17:34:08.864187783Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"labels":["must-fix","review-finding"]}
{"id":"bd-3ls","title":"Add project-type-conditional design docs to botbox init","description":"When botbox init asks for project type (cli, tui, api, library), copy relevant design guideline docs to .agents/botbox/design/. Source from packages/cli/docs/design/. Examples: CLI design conventions for cli/tui projects, API design conventions for api projects. Uses same bundled doc mechanism as workflow docs, managed by botbox sync. Source material in ~/src/ai-docs.","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-30T18:11:15.002573428Z","created_by":"bob","updated_at":"2026-01-30T18:11:15.002573428Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3ov","title":"Read version from package.json instead of hardcoding","description":"Version 0.0.1 is duplicated in package.json and index.mjs. Read version from package.json dynamically so they cannot drift.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-29T17:33:14.911378604Z","created_by":"bob","updated_at":"2026-01-29T17:36:31.813475289Z","closed_at":"2026-01-29T17:36:31.813460010Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"labels":["review-finding","should-fix"]}
{"id":"bd-3s6","title":"Publish placeholder packages to npm","description":"Publish @botbox/cli and botbox to npm as 0.0.1 placeholders to reserve the names. Use just publish.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T17:22:46.887132725Z","created_by":"bob","updated_at":"2026-01-29T19:39:20.177575437Z","closed_at":"2026-01-29T19:39:20.177548256Z","close_reason":"done by bob","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-80l","title":"Update review-response.md: include workspace path in re-request announcement","description":"When the author re-requests review after fixing issues, the botbus announcement should include the workspace path so the reviewer knows where to find the fixed code.\n\nCurrent: botbus send ... 'Review feedback addressed: <review-id>' -L review-response\nProposed: botbus send ... 'Review feedback addressed: <review-id> — fixes in workspace <ws-name> (<ws-path>)' -L review-response\n\nThis is the prompt-level fix for the workspace visibility gap discovered in R4-1 Phase 4. The tool-level fixes are tracked in botcrit (bd-2do, bd-2r4).\n\nAlso update the re-review prompt guidance in eval-review.md R4 section to document this pattern.\n\nAcceptance criteria:\n- review-response.md step 3d includes workspace path in botbus message\n- Re-review prompts can reference the workspace from the botbus message\n\nTesting: bun test (doc hash changes)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-31T19:59:39.488974532Z","created_by":"bob","updated_at":"2026-01-31T20:14:11.572853215Z","closed_at":"2026-01-31T20:14:11.572827036Z","close_reason":"Updated review-response.md step 3d to include workspace path in botbus announcement","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-dbz","title":"Validate CLI flag inputs (tools, type, reviewers)","description":"init.mjs accepts any string for --tools, --type, --reviewers without validation. Typos like --tools beadz silently produce broken AGENTS.md. Validate against PROJECT_TYPES, AVAILABLE_TOOLS, REVIEWER_ROLES constants. Error with clear message on invalid values.","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-29T17:33:14.309172744Z","created_by":"bob","updated_at":"2026-01-29T17:34:42.882790930Z","closed_at":"2026-01-29T17:34:42.882767516Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"labels":["must-fix","review-finding"]}
{"id":"bd-e29","title":"Strengthen progress comment requirement","description":"Iteration 2 of agent-loop eval had grooming and completion comments but no Progress comment during implementation. Options: (1) stronger language in worker-loop.md, (2) add to finish.md checklist as a prerequisite for closing, (3) make br close warn if no progress comment exists. Currently says 'Add at least one progress comment' but gets skipped.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-30T14:23:47.448158913Z","created_by":"bob","updated_at":"2026-01-30T16:25:45.994104530Z","closed_at":"2026-01-30T16:25:45.994078040Z","close_reason":"Strengthened to 'must add' in worker-loop.md, added verification step to finish.md checklist","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-gdt","title":"Update eval verification to use botbus claims --since","description":"botbus v0.3.8 added --since flag to claims command. Update eval-loop.md verification methods to use 'botbus claims --agent $AGENT --since 1h' instead of bare 'botbus claims --agent $AGENT' for cleaner eval output. Also useful for filtering claims by session.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-30T16:05:43.426035899Z","created_by":"bob","updated_at":"2026-01-30T16:25:46.050386184Z","closed_at":"2026-01-30T16:25:46.050366257Z","close_reason":"Updated eval-loop.md shell-level checks to use botbus claims --since 1h","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-kng","title":"Update workflow docs: run br commands from default workspace only","description":"maw-dev confirmed that beads merge conflicts (.beads/issues.jsonl) are caused by agents running br commands from inside agent workspaces. Both the workspace and default modify the beads file, creating jj conflicts. Update worker-loop.md, start.md, and finish.md to instruct agents to run all br commands (br update, br close, br comments, br sync) from the default workspace context, not from .workspaces/$WS/. Use 'cd $PROJECT_ROOT && br ...' or 'maw ws jj default -- ...' pattern.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T16:05:43.281798973Z","created_by":"bob","updated_at":"2026-01-30T16:25:45.871893867Z","closed_at":"2026-01-30T16:25:45.871871134Z","close_reason":"Added br-from-project-root guidance to worker-loop.md, start.md, finish.md, and agent-loop.sh prompt","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-l3w","title":"Waiting on maw: merge doesn't rebase default onto work commits","description":"Filed feedback in #maw. After maw ws merge <ws> --destroy -f, work commits exist in jj but default's working copy isn't descended from them. Project root ends up empty.\n\nDiscovered during eval run 6 (Sonnet). Agent followed protocol correctly — this is a maw ws merge behavior issue.\n\nEnv: /tmp/tmp.9NpmXrdq5A\nBotbus message: sent to #maw with -L feedback\n\nBlocked on: maw-dev response","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-29T23:39:16.734038768Z","created_by":"bob","updated_at":"2026-01-29T23:55:11.956733903Z","closed_at":"2026-01-29T23:55:11.956709237Z","close_reason":"Fixed in maw v0.8.0","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-n6d","title":"E2E: --force vs no --force","description":"Test 8 from testing.md — verify overwrite protection and --force override","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-29T18:39:18.902167795Z","created_by":"bob","updated_at":"2026-01-29T18:42:48.498193281Z","closed_at":"2026-01-29T18:42:48.498169877Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-p1j","title":"Add AGENTS.md with mesh protocol guidance","description":"Document mesh protocol usage, agent identity, and beads workflow for this repo.","status":"closed","priority":2,"issue_type":"docs","created_at":"2026-01-26T23:29:00.647099983Z","created_by":"bob","updated_at":"2026-01-26T23:29:50.034736846Z","closed_at":"2026-01-26T23:29:50.034660744Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-ugh","title":"cli: ctrl+c on prompt shows bad message","description":"❯ botbox init? Project name:57 |             reject(new ExitPromptError(`User force closed the prompt with ${code} ${signal}`));58 |         }));59 |         // SIGINT must be explicitly handled by the prompt so the ExitPromptError can be handled.60 |         // Otherwise, the prompt will stop and in some scenarios never resolve.61 |         // Ref issue #174162 |         const sigint = () => reject(new ExitPromptError(`User force closed the prompt with SIGINT`));                                         ^ExitPromptError: User force closed the prompt with SIGINT      at sigint (/home/bob/src/botbox/packages/cli/node_modules/@inquirer/core/dist/esm/lib/create-prompt.js:62:37)      at emit (node:events:92:22)      at [_ttyWrite] (node:readline:960:22)      at onKeyPress (node:readline:476:22)      at emit (node:events:98:22)      at emitKeys (node:readline:335:18)      at onData (node:readline:426:44)      at emit (node:events:95:22)      at addChunk (internal:streams/readable:265:47)      at readableAddChunkPushByteMode (internal:streams/readable:243:18)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-29T22:15:52.502856973Z","created_by":"bob","updated_at":"2026-01-31T21:08:48.626451917Z","closed_at":"2026-01-31T21:08:48.626428403Z","close_reason":"Wrapped init prompts in try-catch to handle ExitPromptError from Ctrl+C gracefully, shows 'Initialization cancelled' instead of stack trace.","source_repo":".","compaction_level":0,"original_size":0,"labels":["cli"],"comments":[{"id":3,"issue_id":"bd-ugh","author":"Bob","text":"Note: this is a CLI UX bug, not workflow-related. When user hits ctrl+c during an inquirer prompt, the error message is unhelpful. Low priority relative to eval work.","created_at":"2026-01-30T00:02:58Z"}]}
{"id":"bd-wil","title":"make project type selection multiple-choice","description":"I have several projects that contain multiple types in the categories we list (cli and tui).","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-31T21:07:36.877794577Z","created_by":"bob","updated_at":"2026-01-31T21:08:48.586777773Z","closed_at":"2026-01-31T21:08:48.586749871Z","close_reason":"Changed project type selection from single-choice to multiple-choice (checkbox). Users can now select multiple types like 'api' + 'cli'.","source_repo":".","compaction_level":0,"original_size":0,"labels":["cli"]}
